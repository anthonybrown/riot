/* Riot v5.0.0-alpha.2, @license MIT */
var t,e;t=this,e=function(t){"use strict";function e(t){return t.replace(/-(\w)/g,(t,e)=>e.toUpperCase())}function n(t,e){t.firstChild&&(e.appendChild(t.firstChild),n(t,e))}function r(t){Array.from(t).forEach(o)}function o(t){const{parentNode:e}=t;t.remove?t.remove():e&&e.removeChild(t)}var s={EACH:0,IF:1,SIMPLE:2,TAG:3,SLOT:4},i={ATTRIBUTE:0,EVENT:1,TEXT:2,VALUE:3};function u(t,e){return typeof t===e}function a(t){const e=t.ownerSVGElement;return!!e||null===e}function c(t){return!p(t.content)}function l(t){return u(t,"function")}function h(t){return!p(t)&&u(t,"object")}function p(t){return null==t}const d=t=>t&&t.parentNode&&t.parentNode.removeChild(t),m=(t,e)=>e&&e.parentNode&&e.parentNode.insertBefore(t,e),f=Symbol("unmount"),b=Object.seal({nodes:[],mount(t,e){return this.update(t,e)},update(t,e){const{placeholder:n,nodes:r,childrenMap:o}=this,s=t===f?null:this.evaluate(t),i=s?Array.from(s):[],{newChildrenMap:u,batches:a,futureNodes:c}=(n.parentNode,function(t,e,n,r){const{condition:o,template:s,childrenMap:i,itemName:u,getKey:a,indexName:c,root:l,isTemplateTag:h}=r,p=new Map,d=[],m=[];return t.forEach((t,r)=>{const f=function(t,e){let{itemName:n,indexName:r,index:o,item:s}=e;return t[n]=s,r&&(t[r]=o),t}(Object.create(e),{itemName:u,indexName:c,index:r,item:t}),b=a?a(f):r,O=i.get(b);if(function(t,e){return!!t&&!1===Boolean(t(e))}(o,f))return;const g=O?O.template:s.clone(),E=O?g.el:l.cloneNode(),v=!O,N=h&&v?function(t){const e=t.dom.cloneNode(!0);return{avoidDOMInjection:!0,fragment:e,children:Array.from(e.childNodes)}}(g):{};if(v?d.push(()=>g.mount(E,f,n,N)):d.push(()=>g.update(f,n)),h){const t=N.children||g.children;m.push(...t)}else m.push(E);i.delete(b),p.set(b,{template:g,context:f,index:r})}),{newChildrenMap:p,batches:d,futureNodes:m}}(i,t,e,this));return((t,e,n,r,o)=>{const s=n.length;let i=e.length,u=s,a=0,c=0,l=null;for(;a<i||c<u;)if(i===a){const t=u<s?c?r(n[c-1],-0).nextSibling:r(n[u-c],0):o;for(;c<u;)m(r(n[c++],1),t)}else if(u===c)for(;a<i;)l&&l.has(e[a])||d(r(e[a],-1)),a++;else if(e[a]===n[c])a++,c++;else if(e[i-1]===n[u-1])i--,u--;else if(e[a]===n[u-1]&&n[c]===e[i-1]){const t=r(e[--i],-1).nextSibling;m(r(n[c++],1),r(e[a++],-1).nextSibling),m(r(n[--u],1),t),e[i]=n[u]}else{if(!l){l=new Map;let t=c;for(;t<u;)l.set(n[t],t++)}if(l.has(e[a])){const t=l.get(e[a]);if(c<t&&t<u){let o=a,s=1;for(;++o<i&&o<u&&l.get(e[o])===t+s;)s++;if(s>t-c){const o=r(e[a],0);for(;c<t;)m(r(n[c++],1),o)}else h=r(n[c++],1),(p=r(e[a++],-1))&&p.parentNode&&p.parentNode.replaceChild(h,p)}else a++}else d(r(e[a++],-1))}var h,p})(0,r,c,function(t,e){return(n,r)=>{if(r<0){const n=t.pop();if(n){const{template:t,context:r}=n;t.unmount(r,e,null)}}return n}}(Array.from(o.values()),e),n),a.forEach(t=>t()),this.childrenMap=u,this.nodes=c,this},unmount(t,e){return this.update(f,e),this}}),O=Object.seal({mount(t,e){return this.update(t,e)},update(t,e){const n=!!this.evaluate(t),r=!this.value&&n,o=this.value&&!n,s=()=>{const n=this.node.cloneNode();this.placeholder.parentNode.insertBefore(n,this.placeholder),this.template=this.template.clone(),this.template.mount(n,t,e)};switch(!0){case r:s();break;case o:this.unmount(t);break;default:n&&this.template.update(t,e)}return this.value=n,this},unmount(t,e){return this.template.unmount(t,e,!0),this}});function g(t){throw new Error(t)}function E(t){return t.reduce((t,n)=>{const{value:r,type:o}=n;switch(!0){case!n.name&&0===o:return Object.assign({},t,r);case 3===o:t.value=n.value;break;default:t[e(n.name)]=n.value}return t},{})}const v="removeAttribute",N="setAttribute",T="undefined"==typeof Element?{}:Element.prototype,y=function(t){const e=new Map,n=n=>(e.has(n)||e.set(n,t.call(this,n)))&&e.get(n);return n.cache=e,n}(t=>T.hasOwnProperty(t));function M(t,e,n,r){let{name:o}=e;if(!o)return r&&function(t,e,n){const r=e?Object.keys(e):[];Object.keys(n).filter(t=>!r.includes(t)).forEach(e=>t.removeAttribute(e))}(t,n,r),void(n&&function(t,e){Object.entries(e).forEach(e=>{let[n,r]=e;return M(t,{name:n},r)})}(t,n));!y(o)&&(function(t){return u(t,"boolean")}(n)||h(n)||l(n))&&(t[o]=n),t[function(t){return p(t)||!1===t||""===t||h(t)||l(t)?v:N}(n)](o,function(t,e){return!0===e?t:e}(o,n))}const j=/^on/,_={handleEvent(t){this[t.type](t)}},A=new WeakMap;function S(t){return p(t)?"":t}const w=(t,e)=>{const n=t.childNodes[e];if(n.nodeType===Node.COMMENT_NODE){const e=document.createTextNode("");return t.replaceChild(e,n),e}return n};var x={0:M,1:function(t,e,n){let{name:r}=e;const o=r.replace(j,""),s=A.get(t)||(t=>{const e=Object.create(_);return A.set(t,e),e})(t),[i,u]=(t=>Array.isArray(t)?t:[t,!1])(n),a=s[o],c=i&&!a;a&&!i&&t.removeEventListener(o,s),c&&t.addEventListener(o,s,u),s[o]=i},2:function(t,e,n){t.data=S(n)},3:function(t,e,n){t.value=S(n)}};const P=Object.seal({mount(t){return this.value=this.evaluate(t),U(this,this.value),this},update(t){const e=this.evaluate(t);return this.value!==e&&(U(this,e),this.value=e),this},unmount(){return 1===this.type&&U(this,null),this}});function U(t,e){return x[t.type](t.node,t,e,t.value)}function C(t,e){return Object.assign({},P,e,{node:2===e.type?w(t,e.childNodeIndex):t})}const D=new Map,B=Symbol("riot-component"),I=new Set,Y="is",L="mount",K="update",R="unmount",k="shouldUpdate",$="onBeforeMount",z="onMounted",H="onBeforeUpdate",F="onUpdated",V="onBeforeUnmount",G="onUnmounted",q="props",W="state",X="slots",Z="root",J=Symbol.for("pure"),Q=Symbol("parent"),tt=Symbol("attributes"),et=Symbol("template");var nt=Object.freeze({__proto__:null,COMPONENTS_IMPLEMENTATION_MAP:D,DOM_COMPONENT_INSTANCE_PROPERTY:B,PLUGINS_SET:I,IS_DIRECTIVE:Y,VALUE_ATTRIBUTE:"value",MOUNT_METHOD_KEY:L,UPDATE_METHOD_KEY:K,UNMOUNT_METHOD_KEY:R,SHOULD_UPDATE_KEY:k,ON_BEFORE_MOUNT_KEY:$,ON_MOUNTED_KEY:z,ON_BEFORE_UPDATE_KEY:H,ON_UPDATED_KEY:F,ON_BEFORE_UNMOUNT_KEY:V,ON_UNMOUNTED_KEY:G,PROPS_KEY:q,STATE_KEY:W,SLOTS_KEY:X,ROOT_KEY:Z,IS_PURE_SYMBOL:J,PARENT_KEY_SYMBOL:Q,ATTRIBUTES_KEY_SYMBOL:tt,TEMPLATE_KEY_SYMBOL:et});const rt=(t,e)=>t[Q]||e,ot=Object.seal({attributes:[],getTemplateScope(t,e){return function(t,e,n){if(!t||!t.length)return n;const r=t.map(t=>Object.assign({},t,{value:t.evaluate(e)}));return Object.assign(Object.create(n||null),E(r))}(this.attributes,t,e)},mount(t,e){const n=!!t.slots&&t.slots.find(t=>{let{id:e}=t;return e===this.name}),{parentNode:r}=this.node,s=rt(t,e);return this.template=n&&mt(n.html,n.bindings).createDOM(r),this.template&&(this.template.mount(this.node,this.getTemplateScope(t,s),s),this.template.children=st(this.node)),o(this.node),this},update(t,e){if(this.template){const n=rt(t,e);this.template.update(this.getTemplateScope(t,n),n)}return this},unmount(t,e,n){return this.template&&this.template.unmount(this.getTemplateScope(t,e),null,n),this}});function st(t,e){void 0===e&&(e=[]);const n=t.firstChild;return n?(t.parentNode.insertBefore(n,t),[n,...st(t)]):e}function it(t){return t.reduce((t,e)=>{let{bindings:n}=e;return t.concat(n)},[])}const ut=Object.seal({mount(t){return this.update(t)},update(t,e){const n=this.evaluate(t);return n===this.name?this.tag.update(t):(this.unmount(t,e,!0),this.name=n,this.tag=function(t,e,n){return void 0===e&&(e=[]),void 0===n&&(n=[]),t?t({slots:e,attributes:n}):mt(function(t){return t.reduce((t,e)=>t+e.html,"")}(e),[...it(e),{expressions:n.map(t=>Object.assign({type:0},t))}])}(this.getComponent(n),this.slots,this.attributes),this.tag.mount(this.node,t)),this},unmount(t,e,n){return this.tag&&this.tag.unmount(n),this}});var at={1:function(t,e){let{evaluate:n,template:r}=e;const s=t.parentNode,i=document.createTextNode("");return s.insertBefore(i,t),o(t),Object.assign({},O,{node:t,evaluate:n,placeholder:i,template:r.createDOM(t)})},2:function(t,e){let{expressions:n}=e;return Object.assign({},(r=n.map(e=>C(t,e)),["mount","update","unmount"].reduce((t,e)=>Object.assign({},t,{[e]:t=>r.map(n=>n[e](t))&&o}),{})));var r,o},0:function(t,e){let{evaluate:n,condition:r,itemName:s,indexName:i,getKey:u,template:a}=e;const l=document.createTextNode(""),h=t.parentNode,p=t.cloneNode();return h.insertBefore(l,t),o(t),Object.assign({},b,{childrenMap:new Map,node:t,root:p,condition:r,evaluate:n,isTemplateTag:c(p),template:a.createDOM(t),getKey:u,indexName:i,itemName:s,placeholder:l})},3:function(t,e){let{evaluate:n,getComponent:r,slots:o,attributes:s}=e;return Object.assign({},ut,{node:t,evaluate:n,slots:o,attributes:s,getComponent:r})},4:function(t,e){let{name:n,attributes:r}=e;return Object.assign({},ot,{attributes:r,node:t,name:n})}};function ct(t,e){return t.map(t=>2===t.type?Object.assign({},t,{childNodeIndex:t.childNodeIndex+e}):t)}function lt(t,e,n){const{selector:r,type:o,redundantAttribute:s,expressions:i}=e,u=r?t.querySelector(r):t;s&&u.removeAttribute(s);const a=i||[];return(at[o]||at[2])(u,Object.assign({},e,{expressions:n&&!r?ct(a,n):a}))}function ht(t,e){return a(t)?function(t,e){return e.ownerDocument.importNode((new window.DOMParser).parseFromString(`<svg xmlns="http://www.w3.org/2000/svg">${t}</svg>`,"application/xml").documentElement,!0)}(e,t):function(t,e){const n=c(e)?e:document.createElement("template");return n.innerHTML=t,n.content}(e,t)}function pt(t,e){switch(!0){case a(t):n(e,t);break;case c(t):t.parentNode.replaceChild(e,t);break;default:t.appendChild(e)}}const dt=Object.freeze({createDOM(t){return this.dom=this.dom||function(t,e){return e&&("string"==typeof e?ht(t,e):e)}(t,this.html),this},mount(t,e,n,r){if(void 0===r&&(r={}),!t)throw new Error("Please provide DOM node to mount properly your template");this.el&&this.unmount(e);const{fragment:o,children:s,avoidDOMInjection:i}=r,{parentNode:u}=s?s[0]:t,a=c(t),l=a?Math.max(Array.from(u.childNodes).indexOf(t),0):null;return this.isTemplateTag=a,this.createDOM(t),this.dom&&(this.fragment=o||this.dom.cloneNode(!0)),this.el=this.isTemplateTag?u:t,this.children=this.isTemplateTag?s||Array.from(this.fragment.childNodes):null,!i&&this.fragment&&pt(t,this.fragment),this.bindings=this.bindingsData.map(t=>lt(this.el,t,l)),this.bindings.forEach(t=>t.mount(e,n)),this},update(t,e){return this.bindings.forEach(n=>n.update(t,e)),this},unmount(t,e,n){if(this.el){switch(this.bindings.forEach(r=>r.unmount(t,e,n)),!0){case this.children&&null!==n:r(this.children);break;case!0===n:o(this.el);break;case null!==n:r(this.el.childNodes)}this.el=null}return this},clone(){return Object.assign({},this,{el:null})}});function mt(t,e){return void 0===e&&(e=[]),Object.assign({},dt,{html:t,bindingsData:e})}var ft=Object.freeze({__proto__:null,template:mt,createBinding:lt,createExpression:C,bindingTypes:s,expressionTypes:i});function bt(){return this}function Ot(t){return l(t)?t.prototype&&t.prototype.constructor?new t:t():t}function gt(t,e,n,r){return void 0===r&&(r={}),Object.defineProperty(t,e,Object.assign({value:n,enumerable:!1,writable:!1,configurable:!0},r)),t}function Et(t,e,n){return Object.entries(e).forEach(e=>{let[r,o]=e;gt(t,r,o,n)}),t}function vt(t,e){return Object.entries(e).forEach(e=>{let[n,r]=e;t[n]||(t[n]=r)}),t}function Nt(t){return Array.isArray(t)?t:/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(t))&&"number"==typeof t.length?Array.from(t):[t]}function Tt(t,e){return Nt("string"==typeof t?(e||document).querySelectorAll(t):t)}const yt=t=>1===t.length?t[0]:t;function Mt(t,e,n){const r="object"==typeof e?e:{[e]:n},o=Object.keys(r);return Nt(t).forEach(t=>{o.forEach(e=>t.setAttribute(e,r[e]))}),t}function jt(t,e){return function(t,e,n){const r="string"==typeof e?[e]:e;return yt(Nt(t).map(t=>yt(r.map(e=>t[n](e)))))}(t,e,"getAttribute")}const _t=new Map,At=()=>St||(Mt(St=Tt("style[riot]")[0]||document.createElement("style"),"type","text/css"),St.parentNode||document.head.appendChild(St),St);var St,wt={CSS_BY_NAME:_t,add(t,e){return _t.has(t)||(_t.set(t,e),this.inject()),this},inject(){return At().innerHTML=[..._t.values()].join("\n"),this},remove(t){return _t.has(t)&&(_t.delete(t),this.inject()),this}};function xt(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];return(r=[...n,...r]).length<t.length?xt(t,...r):t(...r)}}function Pt(t){return jt(t,Y)||t.tagName.toLowerCase()}const Ut=Object.freeze({$(t){return Tt(t,this.root)[0]},$$(t){return Tt(t,this.root)}}),Ct=Object.freeze({[L]:bt,[K]:bt,[R]:bt}),Dt=Object.freeze({[k]:bt,[$]:bt,[z]:bt,[H]:bt,[F]:bt,[V]:bt,[G]:bt}),Bt=Object.assign({},Ct,{clone:bt,createDOM:bt});function It(t,n){return void 0===n&&(n={}),Object.assign({},function(t){return Array.from(t.attributes).reduce((t,n)=>(t[e(n.name)]=n.value,t),{})}(t),Ot(n))}const Yt=(t,e)=>t[B]=e;function Lt(t){return[L,K,R].reduce((e,n)=>(e[n]=t(n),e),{})}function Kt(t){let{css:e,template:n,exports:r,name:o}=t;const u=n?function(t,e){return t(mt,i,s,t=>e[t]||D.get(t))}(n,r?(void 0===(a=r.components)&&(a={}),Object.entries(Ot(a)).reduce((t,e)=>{let[n,r]=e;var o;return t[(o=n,o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase())]=Kt(r),t},{})):{}):Bt;var a;return t=>{let{slots:s,attributes:i,props:a}=t;if(r&&r[J])return function(t,e){let{slots:n,attributes:r,props:o,css:s,template:i}=e;i&&g("Pure components can not have html"),s&&g("Pure components do not have css");const u=vt(t({slots:n,attributes:r,props:o}),Ct);return Lt(t=>function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(t===L){const[t]=n;Yt(t,u)}return u[t](...n),u})}(r,{slots:s,attributes:i,props:a,css:e,template:n});const c=Ot(r)||{},l=Rt({css:e,template:u,componentAPI:c,name:o})({slots:s,attributes:i,props:a});return{mount:(t,e,n)=>l.mount(t,n,e),update:(t,e)=>l.update(e,t),unmount:t=>l.unmount(t)}}}function Rt(t){let{css:e,template:n,componentAPI:r,name:o}=t;return e&&o&&wt.add(o,e),xt($t)(Et(vt(r,Object.assign({},Dt,{[W]:{}})),Object.assign({[X]:null,[Z]:null},Ut,{name:o,css:e,template:n})))}function kt(t,e){return Object.assign({},t,Ot(e))}function $t(t,e){let{slots:n,attributes:r,props:o}=e;return s=function(t){return[...I].reduce((t,e)=>e(t)||t,t)}(Et(Object.create(t),{mount(e,s,i){return void 0===s&&(s={}),this[tt]=function(t,e){void 0===e&&(e=[]);const n=e.map(e=>C(t,e)),r={};return Object.assign(r,Object.assign({expressions:n},Lt(t=>e=>(n.forEach(n=>n[t](e)),r))))}(e,r).mount(i),gt(this,q,Object.freeze(Object.assign({},It(e,o),E(this[tt].expressions)))),this.state=kt(this.state,s),this[et]=this.template.createDOM(e).clone(),Yt(e,this),t.name&&function(t,e){Pt(t)!==e&&Mt(t,Y,e)}(e,t.name),gt(this,Z,e),gt(this,X,n),this.onBeforeMount(this.props,this.state),this[Q]=i,this[et].mount(e,this,i),this.onMounted(this.props,this.state),this},update(t,e){void 0===t&&(t={}),e&&(this[Q]=e,this[tt].update(e));const n=E(this[tt].expressions);if(!1!==this.shouldUpdate(n,this.props))return gt(this,q,Object.freeze(Object.assign({},this.props,n))),this.state=kt(this.state,t),this.onBeforeUpdate(this.props,this.state),this[et].update(this,this[Q]),this.onUpdated(this.props,this.state),this},unmount(t){return this.onBeforeUnmount(this.props,this.state),this[tt].unmount(),this[et].unmount(this,this[Q],null===t?null:!t),this.onUnmounted(this.props,this.state),this}})),Object.keys(t).filter(e=>l(t[e])).forEach(t=>{s[t]=s[t].bind(s)}),s;var s}const{DOM_COMPONENT_INSTANCE_PROPERTY:zt,COMPONENTS_IMPLEMENTATION_MAP:Ht,PLUGINS_SET:Ft}=nt,Vt={cssManager:wt,DOMBindings:ft,createComponent:Kt,defineComponent:Rt,globals:nt};t.__=Vt,t.component=function(t){return function(e,n,r){let{slots:o,attributes:s,parentScope:i}=void 0===r?{}:r;return function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((t,e)=>function(){return t(e(...arguments))})}(t=>t.mount(e,i),t=>t({props:n,slots:o,attributes:s}),Kt)(t)}},t.install=function(t){return l(t)||g("Plugins must be of type function"),Ft.has(t)&&g("This plugin was already installed"),Ft.add(t),Ft},t.mount=function(t,e,n){return Tt(t).map(t=>function(t,e,n){const r=n||Pt(t);return D.has(r)||g(`The component named "${r}" was never registered`),D.get(r)({props:e}).mount(t)}(t,e,n))},t.pure=function(t){return l(t)||g('riot.pure accepts only arguments of type "function"'),t[J]=!0,t},t.register=function(t,e){let{css:n,template:r,exports:o}=e;return Ht.has(t)&&g(`The component "${t}" was already registered`),Ht.set(t,Kt({name:t,css:n,template:r,exports:o})),Ht},t.uninstall=function(t){return Ft.has(t)||g("This plugin was never installed"),Ft.delete(t),Ft},t.unmount=function(t,e){return Tt(t).map(t=>(t[zt]&&t[zt].unmount(e),t))},t.unregister=function(t){return Ht.has(t)||g(`The component "${t}" was never registered`),Ht.delete(t),wt.remove(t),Ht},t.version="v5.0.0-alpha.2",Object.defineProperty(t,"__esModule",{value:!0})},"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).riot={});
